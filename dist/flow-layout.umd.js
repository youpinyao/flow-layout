(function(i,o){typeof exports=="object"&&typeof module<"u"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(i=typeof globalThis<"u"?globalThis:i||self,o(i.FlowLayout={}))})(this,function(i){"use strict";var v=Object.defineProperty;var T=(i,o,p)=>o in i?v(i,o,{enumerable:!0,configurable:!0,writable:!0,value:p}):i[o]=p;var b=(i,o,p)=>T(i,typeof o!="symbol"?o+"":o,p);class o{constructor(e){b(this,"options");b(this,"debounceTimeout",null);this.options={gap:10,...e},this.initialize()}getContainer(){const{container:e}=this.options;return typeof e=="string"?document.querySelector(e):e}getItems(){const{items:e}=this.options;return[e].flat().map(s=>typeof s=="string"?Array.from(document.querySelectorAll(s)):s).flat()}initialize(){const e=this.getContainer();e.style.position="relative";const s=new ResizeObserver(()=>{this.debounceUpdate()});new MutationObserver(n=>{this.debounceUpdate(),n.forEach(r=>{r.addedNodes.forEach(a=>{a instanceof HTMLElement&&(s.unobserve(a),s.observe(a))}),r.removedNodes.forEach(a=>{a instanceof HTMLElement&&s.unobserve(a)})})}).observe(e,{childList:!0,subtree:!0}),s.observe(e)}update(){const{gap:e=10,appendToMinHeightColumn:s=!1}=this.options,l=this.getContainer(),n={x:0},r={},a=this.getItems(),g=t=>(t==null?void 0:t.reduce((u,c)=>u+c.offsetHeight+e,0))||0,m=t=>parseInt(getComputedStyle(t).paddingLeft.replace("px",""))+parseInt(getComputedStyle(t).paddingRight.replace("px",""));a.forEach(t=>{var c;const u=t.nextElementSibling;if(t instanceof HTMLElement&&(t.style.position="absolute",t.style.transform=`translate(${n.x}px, ${g(r[n.x])}px)`,r[n.x]=[...r[n.x]||[],t],n.x+=t.offsetWidth+e,n.x+((u==null?void 0:u.offsetWidth)??0)>l.clientWidth-m(l)&&(n.x=0),s&&g(r[n.x])!==0)){const f=Object.entries(r).map(([d,h])=>[parseFloat(d),h.reduce((x,y)=>x+y.offsetHeight+e,0)]).sort((d,h)=>d[1]-h[1]);n.x=((c=f==null?void 0:f[0])==null?void 0:c[0])??0}}),l.style.height=`${Object.values(r).map(t=>t.reduce((u,c)=>u+c.offsetHeight+e,0)).reduce((t,u)=>Math.max(t,u),0)-e}px`}debounceUpdate(){this.debounceTimeout&&clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout(()=>{console.log(333),this.update()},50)}updateOptions(e){this.options={...this.options,...e},this.debounceUpdate()}}i.FlowLayout=o,i.default=o,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
